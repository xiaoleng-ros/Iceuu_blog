# 开发实施计划：个人博客系统 (Next.js + Supabase + GitHub)

根据确认的需求文档，我将分五个阶段进行开发。

## Phase 1: 项目初始化与基础设施搭建
1.  **项目脚手架**：使用 `create-next-app` 初始化项目（Next.js 14, TypeScript, Tailwind CSS, App Router）。
2.  **依赖安装**：安装核心依赖（`@supabase/supabase-js`, `axios`, `lucide-react`, `date-fns` 等）。
3.  **目录结构**：建立标准的 Feature-based 或 Layer-based 目录结构（`lib`, `components`, `app`, `types`, `utils`）。
4.  **UI 基础**：配置 Tailwind 主题（深空蓝/纯净白/活力橙），封装基础 UI 组件（Button, Input, Card, Modal）。
5.  **工具库封装**：
    *   `lib/supabase.ts`: Supabase 客户端单例。
    *   `lib/github.ts`: GitHub API 图片上传与链接生成工具。

## Phase 2: 数据库准备与后端 API 开发
1.  **数据库脚本**：生成 `supabase_schema.sql`，包含所有表结构（blogs, media, site_config 等）、索引和 RLS 策略，供您在 Supabase 控制台执行。
2.  **API Routes 实现**：
    *   **Auth**: 登录/登出（配合 Supabase Auth）。
    *   **Blog**: CRUD 接口（增删改查），支持分页与筛选。
    *   **Media**: 图片上传接口（接收文件 -> 推送 GitHub -> 存库），媒体列表接口。
    *   **Settings**: 站点配置读写接口。
    *   **Tags/Categories**: 分类标签管理接口。

## Phase 3: 后台管理系统 (Admin Portal)
1.  **鉴权布局**：实现 `/admin` 路由守卫，未登录自动跳转登录页；设计后台侧边栏布局。
2.  **登录页面**：实现邮箱+密码登录及 GitHub OAuth 登录 UI。
3.  **编辑器集成**：
    *   集成富文本编辑器（推荐 Tiptap 或 React-Quill，支持 Markdown 快捷键）。
    *   **核心攻坚**：实现编辑器内粘贴/拖拽图片自动上传至 GitHub 并回填链接的逻辑。
4.  **内容管理**：
    *   博客列表页（管理、编辑、删除）。
    *   博客发布/编辑页（元数据设置：封面、标签、分类）。
5.  **媒体库与设置**：图片网格展示与管理；站点基础信息配置表单。

## Phase 4: 前台展示系统 (Public Portal)
1.  **公共布局**：响应式 Header（导航）与 Footer（站点信息）。
2.  **首页开发**：ISR 策略实现博客列表，支持分页与加载更多。
3.  **详情页开发**：
    *   博客正文渲染（支持 Markdown/HTML）。
    *   TOC（目录）生成。
    *   元数据展示（作者、时间、标签）。
4.  **辅助页面**：归档页（分类/标签筛选）、搜索页（全文检索）、关于页。
5.  **性能优化**：配置 `next/image` 优化 GitHub 图片加载；添加 SEO 元数据。

## Phase 5: 部署与交付
1.  **环境变量**：整理 `.env.example`，列出所有需配置的 Key（Supabase URL/Key, GitHub Token 等）。
2.  **部署文档**：编写 `DEPLOY.md`，详细说明 Vercel 部署步骤和 Supabase 配置流程。
3.  **最终测试**：全链路测试（从发布到展示），验证移动端适配。

---
**立即执行**：我将从 **Phase 1** 开始，初始化项目并搭建基础架构。是否确认？